<% @products.each do |product| %>
    $("<%= escape_javascript render(partial: "events/reservations/product", locals: { product: product }) %>").replaceAll("#product-row-<%= product.slug %>");
    <% if @event.reservations_of(product).empty? %>
        (function() {
            var items = $("#product-card-<%= product.slug %>");
            items.fadeOut(function(){
                items.remove();
            });
        })();
    <% else %>
        $("<%= escape_javascript render(partial: "events/product", locals: { product: product }) %>").replaceAll("#product-card-<%= product.slug %>");
        $("<%= escape_javascript render(partial: "events/reservations/instances") %>").replaceAll("#instances");
    <% end %>
<% end %>
$("<%= escape_javascript render(partial: "events/total", locals: { event: @event }) %>").replaceAll("#event-total");
